(this.webpackJsonpscheduler=this.webpackJsonpscheduler||[]).push([[0],{20:function(e,t,n){e.exports=n(49)},25:function(e,t,n){},26:function(e,t,n){},27:function(e,t,n){},28:function(e,t,n){},29:function(e,t,n){},30:function(e,t,n){},31:function(e,t,n){},49:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(19),c=n.n(i),s=(n(25),n(26),n(27),n(4)),o=n.n(s);function m(e){var t=o()("day-list__item",{"day-list__item--selected":e.selected,"day-list__item--full":!e.spots});return r.a.createElement("li",{"data-testid":"day",className:t,onClick:function(){return e.setDay(e.name)},selected:e.selected},r.a.createElement("h2",{className:"text--regular"},e.name),r.a.createElement("h3",{className:"text--light"},e.spots?1===e.spots?"".concat(e.spots," spot remaining"):"".concat(e.spots," spots remaining"):"no spots remaining"))}function l(e){var t=e.days.map((function(t){return r.a.createElement(m,{key:t.id,name:t.name,spots:t.spots,selected:t.name===e.value,setDay:e.onChange})}));return r.a.createElement("ul",null,t)}n(28);function u(e){return r.a.createElement("header",{className:"appointment__time"},r.a.createElement("h4",{className:"text--semi-bold"},e.time),r.a.createElement("hr",{className:"appointment__separator"}))}function d(e){return r.a.createElement("main",{className:"appointment__card appointment__card--show"},r.a.createElement("section",{className:"appointment__card-left"},r.a.createElement("h2",{className:"text--regular"},e.student),r.a.createElement("section",{className:"interviewer"},r.a.createElement("h4",{className:"text--light"},"Interviewer"),r.a.createElement("h3",{className:"text--regular"},e.interviewer.name))),r.a.createElement("section",{className:"appointment__card-right"},r.a.createElement("section",{className:"appointment__actions"},r.a.createElement("img",{className:"appointment__actions-button",src:"images/edit.png",alt:"Edit",onClick:e.onEdit}),r.a.createElement("img",{className:"appointment__actions-button",src:"images/trash.png",alt:"Delete",onClick:e.onDelete}))))}function p(e){return r.a.createElement("main",{className:"appointment__add"},r.a.createElement("img",{className:"appointment__add-button",src:"images/add.png",alt:"Add",onClick:e.onAdd}))}var E=n(3);n(29),n(30);function v(e){var t=o()("interviewers__item",{"interviewers__item--selected":e.selected});return r.a.createElement("li",{className:t,onClick:e.setInterviewer},r.a.createElement("img",{className:"interviewers__item-image",src:e.avatar,alt:e.name}),e.selected&&e.name)}function _(e){var t=e.interviewers.map((function(t){return r.a.createElement(v,{key:t.id,name:t.name,avatar:t.avatar,selected:t.id===e.value,setInterviewer:function(){return e.onChange(t.id)}})}));return r.a.createElement("section",{className:"interviewers"},r.a.createElement("h4",{className:"interviewers__header text--light"},"Interviewer"),r.a.createElement("ul",{className:"interviewers__list"},t))}n(31);function f(e){var t=o()("button",{"button--confirm":e.confirm,"button--danger":e.danger});return r.a.createElement("button",{className:t,onClick:e.onClick,disabled:e.disabled},e.children)}function b(e){var t=Object(a.useState)(e.student||""),n=Object(E.a)(t,2),i=n[0],c=n[1],s=Object(a.useState)(e.interviewerID||null),o=Object(E.a)(s,2),m=o[0],l=o[1],u=Object(a.useState)(""),d=Object(E.a)(u,2),p=d[0],v=d[1];return r.a.createElement("main",{className:"appointment__card appointment__card--create"},r.a.createElement("section",{className:"appointment__card-left"},r.a.createElement("form",{autoComplete:"off",onSubmit:function(e){return e.preventDefault()}},r.a.createElement("input",{className:"appointment__create-input text--semi-bold",name:"name",type:"text",placeholder:"Enter Student Name",value:i,onChange:function(e){c(e.target.value),v("")},"data-testid":"student-name-input"})),(!i||!m)&&r.a.createElement("section",{className:"appointment__validation"},p),r.a.createElement(_,{interviewers:e.interviewers,value:m,onChange:l})),r.a.createElement("section",{className:"appointment__card-right"},r.a.createElement("section",{className:"appointment__actions"},r.a.createElement(f,{danger:!0,onClick:function(){c(""),l(null),e.onCancel()}},"Cancel"),r.a.createElement(f,{confirm:!0,onClick:function(){i?m?(v(""),e.onSave(i,m)):v("Please select an interviewer"):v("Student name cannot be blank")}},"Save"))))}function g(e){return r.a.createElement("main",{className:"appointment__card appointment__card--status"},r.a.createElement("img",{className:"appointment__status-image",src:"images/status.png",alt:"Loading"}),r.a.createElement("h1",{className:"text--semi-bold"},e.message))}function h(e){return r.a.createElement("main",{className:"appointment__card appointment__card--confirm"},r.a.createElement("h1",{className:"text--semi-bold"},e.message),r.a.createElement("section",{className:"appointment__actions"},r.a.createElement(f,{danger:!0,onClick:e.onCancel},"Cancel"),r.a.createElement(f,{danger:!0,onClick:e.onConfirm},"Confirm")))}function N(e){return r.a.createElement("main",{className:"appointment__card appointment__card--error"},r.a.createElement("section",{className:"appointment__error-message"},r.a.createElement("h1",{className:"text--semi-bold"},"Error"),r.a.createElement("h3",{className:"text--light"},e.message)),r.a.createElement("img",{className:"appointment__error-close",src:"images/close.png",alt:"Close",onClick:e.onClose}))}var w=n(9);function O(e){var t=e.interview,n=function(e){var t=Object(a.useState)(e),n=Object(E.a)(t,2),r=n[0],i=n[1],c=Object(a.useState)([e]),s=Object(E.a)(c,2),o=s[0],m=s[1];return{mode:r,transition:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];i(e),m(t?function(t){return[].concat(Object(w.a)(t.slice(0,-1)),[e])}:function(t){return[].concat(Object(w.a)(t),[e])})},back:function(){o.length>1&&(m((function(e){return e.slice(0,e.length-1)})),i(o[o.length-2]))}}}(e.interview?"SHOW":"EMPTY"),i=n.mode,c=n.transition,s=n.back,o=function(t,n){var a={student:t,interviewer:n};c("SAVING"),e.bookInterview(e.id,a).then((function(){return c("SHOW")})).catch((function(e){return c("ERROR_SAVE",!0)}))};return r.a.createElement("article",{className:"appointment","data-testid":"appointment"},r.a.createElement(u,{time:e.time}),"SHOW"===i&&r.a.createElement(d,{student:t.student,interviewer:t.interviewer,onEdit:function(){return c("EDIT")},onDelete:function(){return c("CONFIRM")}}),"EMPTY"===i&&r.a.createElement(p,{onAdd:function(){return c("CREATE")}}),"CREATE"===i&&r.a.createElement(b,{interviewers:e.interviewers,onCancel:s,onSave:o}),"SAVING"===i&&r.a.createElement(g,{message:"Saving"}),"DELETE"===i&&r.a.createElement(g,{message:"Deleting"}),"CONFIRM"===i&&r.a.createElement(h,{message:"Are you sure to cancel this appointment?",onCancel:s,onConfirm:function(){c("DELETE",!0),e.cancelInterview(e.id).then((function(){return c("EMPTY")})).catch((function(e){return c("ERROR_DELETE",!0)}))}}),"EDIT"===i&&r.a.createElement(b,{student:t.student,interviewerID:t.interviewer.id,interviewers:e.interviewers,onCancel:s,onSave:o}),"ERROR_SAVE"===i&&r.a.createElement(N,{message:"Could not save the appointment",onClose:s}),"ERROR_DELETE"===i&&r.a.createElement(N,{message:"Could not cancel the appointment",onClose:s}))}var C=n(1);function j(e,t){var n=e.days.find((function(t){return t.name===e.day})),a=0;n.appointments.forEach((function(e){t[e].interview||a++}));var r=Object(C.a)(Object(C.a)({},n),{},{spots:a});return e.days.map((function(t){return t.name===e.day?r:t}))}var y=n(7),S=n(5),k=n.n(S);function I(e){var t=function(){var e=Object(a.useState)({day:"Monday",days:[],appointments:{}}),t=Object(E.a)(e,2),n=t[0],r=t[1];return Object(a.useEffect)((function(){var e=new WebSocket(Object({NODE_ENV:"production",PUBLIC_URL:"/scheduler",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_WEBSOCKET_URL);e.onopen=function(t){e.send("ping")},Promise.all([k.a.get("/api/days"),k.a.get("/api/appointments"),k.a.get("/api/interviewers")]).then((function(e){var t=Object(E.a)(e,3),n=t[0],a=t[1],i=t[2];r((function(e){return Object(C.a)(Object(C.a)({},e),{},{days:n.data,appointments:a.data,interviewers:i.data})}))}))}),[]),{state:n,setDay:function(e){return r(Object(C.a)(Object(C.a)({},n),{},{day:e}))},bookInterview:function(e,t){var a=Object(C.a)(Object(C.a)({},n.appointments[e]),{},{interview:Object(C.a)({},t)}),i=Object(C.a)(Object(C.a)({},n.appointments),{},Object(y.a)({},e,a));return k.a.put("/api/appointments/".concat(e),{interview:t}).then((function(){var e=j(n,i);r((function(t){return Object(C.a)(Object(C.a)({},t),{},{days:e,appointments:i})}))}))},cancelInterview:function(e){var t=Object(C.a)(Object(C.a)({},n.appointments[e]),{},{interview:null}),a=Object(C.a)(Object(C.a)({},n.appointments),{},Object(y.a)({},e,t));return k.a.delete("/api/appointments/".concat(e)).then((function(){var e=j(n,a);r((function(t){return Object(C.a)(Object(C.a)({},t),{},{days:e,appointments:a})}))}))}}}(),n=t.state,i=t.setDay,c=t.bookInterview,s=t.cancelInterview,o=function(e,t){if(!t)return[];var n=e.days.find((function(e){return e.name===t}));return n?n.interviewers.map((function(t){return e.interviewers[t]})):[]}(n,n.day),m=function(e,t){if(!t)return[];var n=e.days.find((function(e){return e.name===t}));return n?n.appointments.map((function(t){return e.appointments[t]})):[]}(n,n.day).map((function(e){var t=function(e,t){return t?{interviewer:e.interviewers[t.interviewer],student:t.student}:null}(n,e.interview);return r.a.createElement(O,Object.assign({key:e.id},e,{interview:t,interviewers:o,bookInterview:c,cancelInterview:s}))}));return r.a.createElement("main",{className:"layout"},r.a.createElement("section",{className:"sidebar"},r.a.createElement("img",{className:"sidebar--centered",src:"images/logo.png",alt:"Interview Scheduler"}),r.a.createElement("hr",{className:"sidebar__separator sidebar--centered"}),r.a.createElement("nav",{className:"sidebar__menu"},r.a.createElement(l,{days:n.days,value:n.day,onChange:i})),r.a.createElement("img",{className:"sidebar__lhl sidebar--centered",src:"images/lhl.png",alt:"Lighthouse Labs"})),r.a.createElement("section",{className:"schedule"},r.a.createElement("section",{className:"schedule"},m,r.a.createElement(O,{key:"last",time:"5pm"}))))}c.a.render(r.a.createElement(I,null),document.getElementById("root"))}},[[20,1,2]]]);
//# sourceMappingURL=main.fe2d0b9a.chunk.js.map